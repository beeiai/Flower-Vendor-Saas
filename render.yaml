services:
  - type: web
    name: flower-vendor-api
    runtime: docker
    plan: starter
    region: oregon
    branch: main
    healthCheckPath: /api/health
    numInstances: 1
    envVars:
      - key: DATABASE_URL
        sync: false  # Set this in Render dashboard
      - key: SECRET_KEY
        sync: false  # Set this in Render dashboard
      - key: ALGORITHM
        value: HS256
      - key: ACCESS_TOKEN_EXPIRE_MINUTES
        value: '15'
      - key: REFRESH_TOKEN_EXPIRE_DAYS
        value: '7'
      - key: DB_POOL_SIZE
        value: '10'
      - key: DB_MAX_OVERFLOW
        value: '20'
      - key: DB_POOL_TIMEOUT
        value: '30'
      - key: DB_POOL_RECYCLE
        value: '3600'
      - key: REQUIRE_SECURE_SECRETS
        value: 'true'
      - key: AUTH_RATE_LIMIT
        value: '100'
      - key: AUTH_RATE_WINDOW_SECONDS
        value: '60'
      - key: API_RATE_LIMIT
        value: '300'
      - key: API_RATE_WINDOW_SECONDS
        value: '60'
      - key: CORS_ALLOWED_ORIGINS
        value: ''  # Set your production frontend URL
      - key: GUNICORN_WORKERS
        value: '2'
      - key: GUNICORN_TIMEOUT
        value: '30'
      - key: GUNICORN_MAX_REQUESTS
        value: '1000'
      - key: GUNICORN_MAX_REQUESTS_JITTER
        value: '100'
      - key: GUNICORN_BIND
        value: '0.0.0.0:8000'
      - key: LOG_LEVEL
        value: INFO
      - key: ENVIRONMENT
        value: production
      - key: REDIS_URL
        value: ''  # Optional, set if using distributed rate limiting
      - key: ENABLE_DISTRIBUTED_RATE_LIMITING
        value: 'false'
      - key: SENTRY_DSN
        value: ''  # Optional, set if using Sentry